<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
  <mapper namespace="com.hyun.mapper.QnaMapper">

	
	
	<select id="qna_list" resultType="com.hyun.domain.QnaVO" parameterType="map">
	<![CDATA[ 
	select 
		qa_num, mbsp_id, qa_content, qa_title, qa_regdate
	from 
	(
		select /*+INDEX_DESC(QA_TBL pk_qa_num) */
			rownum rn, qa_num, mbsp_id, qa_content, qa_title, qa_regdate
		from 
			QA_TBL 
  		WHERE
            rownum <= #{pageNum} * #{amount}
    )
    	WHERE 
        rn > (#{pageNum} - 1) * #{amount}
    ]]>
	</select>
	
	<select id="getTotalCount" resultType ="int">
			SELECT COUNT(*) FROM QA_TBL
			    <where>
    </where>
	</select>
	
	  	<insert id="qna_insert" parameterType="com.hyun.domain.QnaVO">
  		
  		INSERT INTO 
  			QA_TBL(qa_num, mbsp_id, qa_content, qa_title, qa_regdate)
  		VALUES
  			(#{qa_num}, #{mbsp_id}, #{qa_content}, #{qa_title}, #{qa_regdate})
  			
  	</insert>

  </mapper>